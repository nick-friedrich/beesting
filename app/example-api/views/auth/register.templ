package authviews

import (
	"net/http"

	"github.com/nick-friedrich/beesting/app/example-api/types"
	components "github.com/nick-friedrich/beesting/app/example-api/views/components"
)

type RegisterProps struct {
	Errors  types.AuthValidationErrors
	Name    string
	Email   string
	Request *http.Request
}

templ Register(props RegisterProps) {
	<div class="min-h-[calc(100vh-200px)] flex items-center justify-center bg-base-200 p-4 max-w-xl mx-auto">
		@components.Card("Create your account") {
			<p class="text-base-content/70 text-center mb-6">Sign up to get started with your account.</p>
			if props.Errors.General != "" {
				@components.Alert("error", props.Errors.General)
			}
			<form method="post" class="space-y-4">
				@components.CSRF(props.Request)
				<div class="form-control">
					<label class="label">
						<span class="label-text font-medium">Full Name</span>
					</label>
					<input
						name="name"
						type="text"
						if props.Errors.Name != "" {
							class="input input-bordered input-error w-full"
						} else {
							class="input input-bordered w-full"
						}
						placeholder="Enter your full name"
						value={ props.Name }
						required
					/>
					if props.Errors.Name != "" {
						<label class="label">
							<span class="label-text-alt text-error">{ props.Errors.Name }</span>
						</label>
					}
				</div>
				<div class="form-control">
					<label class="label">
						<span class="label-text font-medium">Email</span>
					</label>
					<input
						name="email"
						type="email"
						if props.Errors.Email != "" {
							class="input input-bordered input-error w-full"
						} else {
							class="input input-bordered w-full"
						}
						placeholder="Enter your email"
						value={ props.Email }
						required
					/>
					if props.Errors.Email != "" {
						<label class="label">
							<span class="label-text-alt text-error">{ props.Errors.Email }</span>
						</label>
					}
				</div>
				<div class="form-control">
					<label class="label">
						<span class="label-text font-medium">Password</span>
					</label>
					<input
						name="password"
						type="password"
						if props.Errors.Password != "" {
							class="input input-bordered input-error w-full"
						} else {
							class="input input-bordered w-full"
						}
						placeholder="Create a password"
						required
					/>
					if props.Errors.Password != "" {
						<label class="label">
							<span class="label-text-alt text-error">{ props.Errors.Password }</span>
						</label>
					}
				</div>
				<div class="form-control">
					<label class="label">
						<span class="label-text font-medium">Confirm Password</span>
					</label>
					<input
						name="confirm_password"
						type="password"
						class="input input-bordered w-full"
						placeholder="Confirm your password"
						required
					/>
				</div>
				<div class="form-control mt-6">
					<button class="btn btn-primary w-full">Create Account</button>
				</div>
				<div class="text-center">
					<p class="text-sm text-base-content/70">
						Already have an account? 
						<a href="/login" class="link link-primary font-medium">Sign in here</a>
					</p>
				</div>
			</form>
		}
	</div>
}
